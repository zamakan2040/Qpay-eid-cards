<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ø¨Ø·Ø§Ù‚Ø© ØªÙ‡Ù†Ø¦Ø© Ø§Ù„Ø¹ÙŠØ¯ (4500Ã—8000)</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap');
    body {
      margin: 0; padding: 0;
      font-family: 'Cairo', sans-serif;
      background: #f0f4ff;
      display: flex; flex-direction: column; align-items: center;
      color: #003366;
    }
    h1 { margin: 20px 0 10px; font-size: 2em; text-align: center; }
    p { margin: 0 0 20px; font-size: 1em; text-align: center; }
    .container {
      width: 100%; max-width: 400px;
      padding: 0 10px; box-sizing: border-box;
    }
    input[type="text"] {
      width: 100%; padding: 10px; font-size: 1.1em;
      border: 2px solid #007bff; border-radius: 6px;
      outline: none; margin-bottom: 15px;
      box-sizing: border-box;
    }
    button {
      width: 100%; padding: 12px; font-size: 1.1em;
      background-color: #007bff; color: white;
      border: none; border-radius: 6px;
      cursor: pointer; transition: background-color 0.2s ease;
    }
    button:hover { background-color: #0056b3; }
    button:disabled { background-color: #ccc; cursor: not-allowed; }
    #loadingText {
      margin-top: 15px; font-size: 1em; color: #555;
      display: none; text-align: center;
    }
    #cardCanvas {
      display: none;
      /* Ø¯Ù‚Ø© Ø§Ù„Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„ÙØ¹Ù„ÙŠØ© 4500Ã—8000 */
      width: 100%; /* Ù„Ù„Ø¹Ø±Ø¶ ÙÙŠ Ø§Ù„Ù…ØªØµÙØ­ Ù†Ø³ØªØ®Ø¯Ù… 100% Ù…Ù‚Ø§Ø³ Ø§Ù„Ø¬ÙˆØ§Ù„ */
      max-width: 400px; /* Ù…ØµØºÙ‘Ø± Ù„Ù„Ø¹Ø±Ø¶ ÙÙ‚Ø· */
      aspect-ratio: 4500/8000;
      border-radius: 6px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    }
    #result img {
      margin-top: 20px; width: 100%; max-width: 400px;
      border-radius: 6px; box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    }
    @media (max-width: 480px) {
      h1 { font-size: 1.5em; }
      button { font-size: 1em; padding: 10px; }
    }
  </style>
</head>
<body>

  <div class="container">
    <h1>ğŸ‰ Ø¨Ø·Ø§Ù‚ØªÙƒ Ø§Ù„Ø®Ø§ØµØ© Ù„Ù„Ø¹ÙŠØ¯ ğŸŒ™</h1>
    <p>Ø£Ø¯Ø®Ù„ Ø§Ø³Ù…Ùƒ ÙˆØ³ÙŠØªÙ… ØªÙˆÙ„ÙŠØ¯ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø© ÙÙˆØ±Ù‹Ø§ ğŸ‘‡</p>

    <input type="text" id="nameInput" placeholder="Ù…Ø«Ø§Ù„: Ø·Ø§Ø±Ù‚ Ø§Ù„Ø¬Ø§Ø¨Ø±ÙŠ" />
    <button id="generateButton">Ø£Ù†Ø´Ø¦ Ø¨Ø·Ø§Ù‚ØªÙŠ</button>
    <div id="loadingText">â³ Ø¬Ø§Ø±ÙŠ ØªÙˆÙ„ÙŠØ¯ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø©â€¦ Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø± Ù‚Ù„ÙŠÙ„Ø§Ù‹</div>

    <!-- Canvas Ø¨Ø­Ø¬Ù… Ø§Ù„Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ø¯Ù‚ÙŠÙ‚Ø© (4500Ã—8000) -->
    <canvas id="cardCanvas" width="4500" height="8000"></canvas>

    <!-- Ù‡Ù†Ø§ Ø³ÙŠØ¸Ù‡Ø± Ø§Ù„Ù†Ø§ØªØ¬ -->
    <div id="result"></div>
  </div>

  <script>
    (function() {
      // Ø±Ø§Ø¨Ø· Ø§Ù„Ø®Ù„ÙÙŠØ© Ø¨ÙˆØ¬Ù‡Ù‡Ø§ Ø§Ù„Ù†Ø³Ø¨ÙŠ Ø¯Ø§Ø®Ù„ Ù†ÙØ³ Ø§Ù„Ù…Ø³ØªÙˆØ¯Ø¹
      const BACKGROUND_URL = 'eid-bg-4500x8000.png';

      const nameInput   = document.getElementById('nameInput');
      const generateBtn = document.getElementById('generateButton');
      const loadingText = document.getElementById('loadingText');
      const cardCanvas  = document.getElementById('cardCanvas');
      const resultDiv   = document.getElementById('result');
      const ctx         = cardCanvas.getContext('2d');

      generateBtn.addEventListener('click', function() {
        const nameValue = nameInput.value.trim();
        if (!nameValue) {
          alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù…Ùƒ Ø£ÙˆÙ„Ø§Ù‹.');
          return;
        }

        loadingText.style.display = 'block';
        generateBtn.disabled = true;
        resultDiv.innerHTML = '';

        const bgImage = new Image();
        bgImage.crossOrigin = 'anonymous';
        bgImage.src = BACKGROUND_URL;

        bgImage.onload = function() {
          // Ø±Ø³Ù… Ø§Ù„Ø®Ù„ÙÙŠØ© Ø¹Ù„Ù‰ ÙƒØ§Ù…Ù„ Ø¯Ù‚Ø© Ø§Ù„ÙƒØ§Ù†ÙØ§Ø³
          ctx.clearRect(0, 0, cardCanvas.width, cardCanvas.height);
          ctx.drawImage(bgImage, 0, 0, cardCanvas.width, cardCanvas.height);

          // Ø¶Ø¨Ø· Ø§Ù„Ø®Ø· ÙˆØ§Ù„Ù„ÙˆÙ†
          const fontSize = 500; // Ù…Ù†Ø§Ø³Ø¨ Ù„Ù„Ø¹Ø±Ø¶ 4500px
          ctx.font = 'bold ' + fontSize + 'px Cairo, sans-serif';
          ctx.fillStyle = '#003366';
          ctx.textAlign = 'center';
          ctx.textBaseline = 'middle';

          // Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø§Ø³Ù… ÙÙˆÙ‚ Ø§Ù„Ø®Ø· ÙÙŠ Ø§Ù„Ø£Ø³ÙÙ„
          const x = cardCanvas.width / 2; // 2250
          const y = 7400;                 // Ø§Ø¶Ø¨Ø· Ø§Ù„Ù‚ÙŠÙ… Ø­Ø³Ø¨ Ø­Ø§Ø¬ØªÙƒ

          ctx.fillText(nameValue, x, y);

          // Ø±Ø³Ù… Ø§Ù„Ø®Ø· ØªØ­Øª Ø§Ù„Ø§Ø³Ù…
          const lineWidth = cardCanvas.width * 0.8; // 3600px
          const lineHeight = 20;
          const lineX = (cardCanvas.width - lineWidth) / 2; // 450px
          const lineY = y + fontSize + 50; // 7400 + 500 + 50 = 7950

          ctx.fillStyle = '#003366';
          ctx.fillRect(lineX, lineY, lineWidth, lineHeight);

          // Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ DataURL Ù„Ù„ØµÙˆØ±Ø© PNG
          const dataURL = cardCanvas.toDataURL('image/png');

          loadingText.style.display = 'none';
          generateBtn.disabled = false;

          // Ø¹Ø±Ø¶ Ø§Ù„ØµÙˆØ±Ø© Ù…Ø¹ Ø±Ø§Ø¨Ø· Ø§Ù„ØªØ­Ù…ÙŠÙ„
          resultDiv.innerHTML = `
            <img src="${dataURL}" alt="Ø¨Ø·Ø§Ù‚ØªÙƒ" />
            <br><br>
            <a href="${dataURL}" download="Ø¨Ø·Ø§Ù‚Ø©_${nameValue}.png">
              ğŸ“¥ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø© (4500Ã—8000)
            </a>
          `;
        };

        bgImage.onerror = function() {
          loadingText.style.display = 'none';
          generateBtn.disabled = false;
          alert('ØªØ¹Ø°Ù‘Ø± ØªØ­Ù…ÙŠÙ„ Ø®Ù„ÙÙŠØ© Ø§Ù„Ø¨Ø·Ø§Ù‚Ø©. ØªØ£ÙƒØ¯ Ø£Ù† Ø§Ù„ØµÙˆØ±Ø© Ù…ÙˆØ¬ÙˆØ¯Ø© ÙÙŠ Ù†ÙØ³ Ø§Ù„Ù…Ø¬Ù„Ø¯.');
        };
      });
    })();
  </script>
</body>
</html>
